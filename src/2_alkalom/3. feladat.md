# Tananyag – Értékpapírok kezelése C#-ban

## 1. Feladat leírása

Ebben a programban **értékpapírok adatait** dolgozzuk fel egy fájlból.  
Minden értékpapír egy névből és több **százalékos eredményből** (hozamból) áll.  
A program célja:
- beolvasni ezeket a sorokat egy fájlból,  
- kiszámítani az egyes értékpapírok **összesített hozamát**,  
- majd kilistázni azokat, amelyek **pozitív hozamot** értek el.

A program két fájlból áll:
- **program.cs** — a vezérlő logika (Main metódus),
- **ertekpapir.cs** — az osztály, ami egy értékpapírt modellál.

---

## 2. `Ertekpapir` osztály

Ez az osztály egyetlen értékpapír adatait tárolja:  
a neve (`Nev`) és a negyedéves vagy éves eredményei (`Eredmenyek` tömb).

```csharp
using System;
using System.Linq;

namespace fa8_ertekpapir
{
    internal class Ertekpapir
    {
        private string Nev;
        private double[] Eredmenyek;

        // A bemeneti sor formátuma: "MOL 2,3 -0,4 3,5 2,1"
        public Ertekpapir(string sor)
        {
            string[] d = sor.Split(' ');
            Nev = d[0];
            Eredmenyek = new double[d.Length - 1];

            for (int i = 0; i < Eredmenyek.Length; i++)
            {
                try
                {
                    Eredmenyek[i] = double.Parse(d[i + 1]);
                }
                catch (Exception e)
                {
                    Console.WriteLine(e.Message);
                }
            }
        }

        // Összesített hozam (a számok összege)
        public double Hozam()
        {
            return Eredmenyek.Sum();
        }

        // Szöveges megjelenítés: név + összesített hozam
        public override string ToString()
        {
            return Nev + " " + Hozam();
        }
    }
}
```

### Magyarázat

- A `Split(' ')` függvénnyel a szöveget **szóközök mentén** daraboljuk fel.
- Az első elem (`d[0]`) a papír neve, a többi szám pedig az egyes időszakok hozama.
- A `double.Parse()` próbálja átkonvertálni a szöveges számokat valós értékké.  
  Hibás adat esetén a `try-catch` lekezeli a kivételt, így a program nem áll le.
- A `Sum()` függvény a `System.Linq` névtérből származik, és **összegzi** a tömb elemeit.
- A `ToString()` biztosítja, hogy a `Console.WriteLine(e)` hívás emberi olvasható formát adjon.

---

## 3. `Program` osztály (Main metódus)

```csharp
using System;
using System.IO;

namespace fa8_ertekpapir
{
    internal class Program
    {
        static void Main(string[] args)
        {
            try
            {
                Ertekpapir[] ep = new Ertekpapir[5];
                StreamReader olvas = new StreamReader("ertekpapir.txt");

                for (int i = 0; i < 5; i++)
                {
                    string sor = olvas.ReadLine();
                    ep[i] = new Ertekpapir(sor);
                }

                olvas.Close();

                Console.WriteLine("A beolvasott értékpapírok:");
                foreach (Ertekpapir e in ep)
                {
                    Console.WriteLine(e.ToString());
                }

                // Sikeres értékpapírok (pozitív hozam)
                Ertekpapir[] Sikeresek = new Ertekpapir[ep.Length];
                int sikeri = 0;

                for (int i = 0; i < ep.Length; i++)
                {
                    if (ep[i].Hozam() > 0)
                    {
                        Sikeresek[sikeri] = ep[i];
                        sikeri++;
                    }
                }

                Console.WriteLine("Sikeresek:");
                foreach (Ertekpapir s in Sikeresek)
                {
                    if (s != null)
                        Console.WriteLine(s);
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }

            Console.ReadLine();
        }
    }
}
```

### Magyarázat

1. **Fájlbeolvasás**  
   - Az `ertekpapir.txt` fájl sorait `StreamReader` segítségével olvassuk be.  
   - Minden sor alapján létrehozunk egy `Ertekpapir` objektumot.

2. **Objektumtömb**  
   - Az `ep` tömb 5 darab értékpapírt tartalmaz.  
   - Ez tetszőlegesen bővíthető, ha dinamikus listát (`List<Ertekpapir>`) használnánk.

3. **Szűrés – pozitív hozam**  
   - Az `if (ep[i].Hozam() > 0)` feltétel segítségével kiszűrjük azokat az értékpapírokat,  
     amelyek **nyereséget hoztak**.

4. **Kimenet**  
   - A `Console.WriteLine(e)` automatikusan meghívja a `ToString()` metódust.  
   - A `foreach` ciklus figyeli, hogy az adott tömbelem nem `null`, mielőtt kiírná.

5. **Hibakezelés**  
   - A `try-catch` blokk megakadályozza, hogy a program leálljon fájl- vagy formátumhiba esetén.  
   - A `Console.WriteLine(e.Message)` megjeleníti a hibát.

---

## 4. Minta bemeneti fájl (ertekpapir.txt)

```text
MOL 2,3 -0,4 3,5 2,1
OTP 1,2 0,3 -0,2 4,1
TESCO -1,2 -0,4 -2,0 -0,5
RABA 0,0 1,0 2,0 1,0
RICHTER 3,3 2,1 -1,2 0,5
```

> A program ezeket beolvassa, kiszámítja az összesített hozamot,  
> majd a pozitív összegűeket listázza ki a **„Sikeresek”** szekcióban.

---

## 5. Matematikai háttér

A program a hozamokat egyszerű **összegzéssel** számítja ki:  

```text
hozam = eredmenyek[0] + eredmenyek[1] + ... + eredmenyek[n]
```

A `LINQ` `Sum()` függvénye ugyanezt automatikusan végzi el.

Pozitív hozam esetén:
```text
hozam > 0 → sikeres értékpapír
```

---

## 6. Összefoglalás

Ez a feladat bemutatja:
- hogyan kezelünk **fájlból beolvasott adatokat**,  
- hogyan tárolunk objektumokat **tömbben**,  
- hogyan használjuk az **osztályokat és metódusokat** együtt,  
- és miként szűrünk feltételek alapján (pozitív hozam).  

**Fejlesztési javaslatok:**
- A tömb helyett `List<Ertekpapir>` használata dinamikus bővítéshez.  
- A `Hozam()` metódus mellett lehetne `AtlagHozam()` is.  
- A fájl sorainak számát automatikusan is meg lehetne határozni (`File.ReadAllLines()`).

---
